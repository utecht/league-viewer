{% set title = "League Overview" %}
{% set heading = "League Overview" %}
{% set my_team_slug = None %}
{% set structured_data = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": heading,
  "dateModified": updated_at,
  "about": {
    "@type": "SportsOrganization",
    "name": "Fantasy League",
    "sport": "Fantasy Football",
    "season": season,
    "member": standings
  },
  "event": scoreboard
} %}
{% extends "base.html" %}
{% block body %}{% endblock %}
{% set content %}
<section>
  <h2>Standings ({{ season }})</h2>
  <table>
    <thead><tr><th>Team</th><th>W</th><th>L</th><th>T</th><th>Pct</th></tr></thead>
    <tbody>
      {% for r in standings %}
      <tr><td><a href="./{{ r.team_key | replace('.','-') }}.html">{{ r.name }}</a></td>
          <td>{{ r.wins }}</td><td>{{ r.losses }}</td><td>{{ r.ties }}</td><td>{{ "%.3f"|format(r.pct) }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<section>
  <h2>This Week</h2>
  {% if scoreboard %}
    <div class="cards">
      {% for m in scoreboard %}
      <div class="matchup-card">
        <div class="muted">Week {{ m.week }}</div>
        <div><strong>{{ m.teams[0].name }}</strong> — {{ m.teams[0].points }} pts</div>
        <div><strong>{{ m.teams[1].name }}</strong> — {{ m.teams[1].points }} pts</div>
        {% if m.teams[0].proj and m.teams[1].proj %}
        <div class="muted">Projected: {{ m.teams[0].proj }} / {{ m.teams[1].proj }}</div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    <p><a href="./week-{{ scoreboard[0].week }}.html">Week {{ scoreboard[0].week }} details →</a></p>
  {% else %}
    <p>No current week data.</p>
  {% endif %}
</section>
{% endset %}
{% include "base.html" %}
