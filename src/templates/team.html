{% set title = team.name %}
{% set heading = team.name %}
{% set my_team_slug = None %}
{% set members = namespace(items=[]) %}
{% for p in team.players %}
  {% set _ = members.items.append({
    "@type": "Person",
    "name": p.name,
    "roleName": p.selected_position if p.selected_position else "Unassigned",
    "disambiguatingDescription": ("On IR" if p.on_injured_reserve else ("On Bench" if p.on_bench else "Active")),
    "eligiblePosition": p.eligible_positions
  }) %}
{% endfor %}
{% set structured_data = {
  "@context": "https://schema.org",
  "@type": "SportsTeam",
  "name": team.name,
  "member": members.items
} %}
{% set content %}
<section>
  <h2>Roster</h2>
  <table>
    <thead><tr><th>Slot</th><th>Player</th><th>Eligible Positions</th></tr></thead>
    <tbody>
      {% for p in team.players %}
      {% set row_class = (('bench-row ' if p.on_bench else '') + ('ir-row' if p.on_injured_reserve else '')).strip() %}
      <tr{% if row_class %} class="{{ row_class }}"{% endif %}>
        <td class="slot-cell">
          {{ p.selected_position if p.selected_position else "â€”" }}
          {% if p.on_bench %}
            <span class="bench-badge">On Bench</span>
          {% elif p.on_injured_reserve %}
            <span class="ir-badge">IR</span>
          {% endif %}
        </td>
        <td>{{ p.name }}</td>
        <td>{{ p.eligible_positions|join(", ") }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endset %}
{% include "base.html" %}
